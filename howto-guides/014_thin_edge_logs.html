<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>How to access the logs on the device? - Thin Edge Book</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../favicon.svg">
                        <link rel="shortcut icon" href="../favicon.png">
                <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
                <link rel="stylesheet" href="../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../001_overview.html">Overview</a></li><li class="chapter-item expanded "><a href="../tutorials/index.html"><strong aria-hidden="true">1.</strong> Tutorials</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tutorials/connect-c8y.html"><strong aria-hidden="true">1.1.</strong> Connect my device to Cumulocity IoT</a></li><li class="chapter-item expanded "><a href="../tutorials/connect-azure.html"><strong aria-hidden="true">1.2.</strong> Connect my device to Azure IoT</a></li><li class="chapter-item expanded "><a href="../tutorials/send-thin-edge-data.html"><strong aria-hidden="true">1.3.</strong> Send Thin Edge Json data</a></li><li class="chapter-item expanded "><a href="../tutorials/device-monitoring.html"><strong aria-hidden="true">1.4.</strong> Monitor my device</a></li><li class="chapter-item expanded "><a href="../tutorials/software-management.html"><strong aria-hidden="true">1.5.</strong> Manage my device software</a></li><li class="chapter-item expanded "><a href="../tutorials/write-my-software-management-plugin.html"><strong aria-hidden="true">1.6.</strong> Write my software management plugin</a></li><li class="chapter-item expanded "><a href="../tutorials/supported_operations.html"><strong aria-hidden="true">1.7.</strong> Supported Operations Management for Cumulocity IoT</a></li></ol></li><li class="chapter-item expanded "><a href="../howto-guides/index.html"><strong aria-hidden="true">2.</strong> How-to Guides</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../howto-guides/002_installation.html"><strong aria-hidden="true">2.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../howto-guides/003_registration.html"><strong aria-hidden="true">2.2.</strong> How to create a test certificate</a></li><li class="chapter-item expanded "><a href="../howto-guides/004_connect.html"><strong aria-hidden="true">2.3.</strong> How to connect a cloud end-point</a></li><li class="chapter-item expanded "><a href="../howto-guides/005_pub_sub.html"><strong aria-hidden="true">2.4.</strong> How to send MQTT messages</a></li><li class="chapter-item expanded "><a href="../howto-guides/007_test_connection.html"><strong aria-hidden="true">2.5.</strong> How to test the cloud connection?</a></li><li class="chapter-item expanded "><a href="../howto-guides/008_config_local_mqtt_port.html"><strong aria-hidden="true">2.6.</strong> How to configure the local mqtt port</a></li><li class="chapter-item expanded "><a href="../howto-guides/009_trouble_shooting_monitoring.html"><strong aria-hidden="true">2.7.</strong> How to trouble shoot device monitoring</a></li><li class="chapter-item expanded "><a href="../howto-guides/010_add_self_signed_trusted.html"><strong aria-hidden="true">2.8.</strong> How to add self-signed certificate root to trusted certificates list?</a></li><li class="chapter-item expanded "><a href="../howto-guides/011_retrieve_jwt_token_from_cumulocity.html"><strong aria-hidden="true">2.9.</strong> How to retrieve JWT token from Cumulocity?</a></li><li class="chapter-item expanded "><a href="../howto-guides/012_install_and_enable_software_management.html"><strong aria-hidden="true">2.10.</strong> How to install and enable software management?</a></li><li class="chapter-item expanded "><a href="../howto-guides/013_connect_external_device.html"><strong aria-hidden="true">2.11.</strong> How to connect an external device?</a></li><li class="chapter-item expanded "><a href="../howto-guides/014_thin_edge_logs.html" class="active"><strong aria-hidden="true">2.12.</strong> How to access the logs on the device?</a></li><li class="chapter-item expanded "><a href="../howto-guides/015_installation_without_deb_support.html"><strong aria-hidden="true">2.13.</strong> How to install thin-edge.io on any Linux OS (no deb support)?</a></li><li class="chapter-item expanded "><a href="../howto-guides/016_restart_device_operation.html"><strong aria-hidden="true">2.14.</strong> How to restart your thin-edge.io device</a></li></ol></li><li class="chapter-item expanded "><a href="../references/index.html"><strong aria-hidden="true">3.</strong> Reference Guides</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../references/tedge.html"><strong aria-hidden="true">3.1.</strong> The tedge command</a></li><li class="chapter-item expanded "><a href="../references/tedge-config.html"><strong aria-hidden="true">3.2.</strong> The tedge config command</a></li><li class="chapter-item expanded "><a href="../references/tedge-cert.html"><strong aria-hidden="true">3.3.</strong> The tedge cert command</a></li><li class="chapter-item expanded "><a href="../references/tedge-connect.html"><strong aria-hidden="true">3.4.</strong> The tedge connect command</a></li><li class="chapter-item expanded "><a href="../references/tedge-disconnect.html"><strong aria-hidden="true">3.5.</strong> The tedge disconnect command</a></li><li class="chapter-item expanded "><a href="../references/tedge-mqtt.html"><strong aria-hidden="true">3.6.</strong> The tedge mqtt command</a></li><li class="chapter-item expanded "><a href="../references/bridged-topics.html"><strong aria-hidden="true">3.7.</strong> The Bridged Topics</a></li><li class="chapter-item expanded "><a href="../references/plugin-api.html"><strong aria-hidden="true">3.8.</strong> The Software Management Plugin API</a></li></ol></li><li class="chapter-item expanded "><a href="../architecture/index.html"><strong aria-hidden="true">4.</strong> Architecture</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../architecture/thin-edge-json.html"><strong aria-hidden="true">4.1.</strong> Thin Edge Json</a></li><li class="chapter-item expanded "><a href="../architecture/mapper.html"><strong aria-hidden="true">4.2.</strong> The Mapper</a></li><li class="chapter-item expanded "><a href="../architecture/software-management.html"><strong aria-hidden="true">4.3.</strong> Software Management</a></li><li class="chapter-item expanded "><a href="../architecture/faq.html"><strong aria-hidden="true">4.4.</strong> Architecture FAQ</a></li><li class="chapter-item expanded "><a href="../supported-platforms.html"><strong aria-hidden="true">4.5.</strong> Platform support</a></li></ol></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Thin Edge Book</h1>

                    <div class="right-buttons">
                                                <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="the-thin-edge-logs"><a class="header" href="#the-thin-edge-logs">The thin-edge logs</a></h1>
<p>The logs that are useful for debugging thin-edge.io break down into logs that are created by thin-edge itself and by third party components.</p>
<h2 id="thin-edge-logs"><a class="header" href="#thin-edge-logs">Thin-edge logs</a></h2>
<p>On a thin-edge device different components like mappers, agent, and plugins run. The log messages of these components can be accessed as below.
The logs here capture INFO, WARNING, and ERROR messages.</p>
<h3 id="cloud-mapper-logs"><a class="header" href="#cloud-mapper-logs">Cloud mapper logs</a></h3>
<p>The thin-edge cloud mapper component that sends the measurement data to the cloud can be accessed as below.</p>
<h4 id="tedge-cumulocity-mapper"><a class="header" href="#tedge-cumulocity-mapper">Tedge Cumulocity mapper</a></h4>
<p>The log messages of the Cumulocity mapper component that sends the measurement data from the thin-edge device to the Cumulocity
cloud can be accessed as below</p>
<p><code>journalctl -u tedge-mapper-c8y.service</code></p>
<blockquote>
<p>Note: Run <code>tedge_mapper --debug c8y</code> to log more debug messages</p>
</blockquote>
<h4 id="tedge-azure-mapper"><a class="header" href="#tedge-azure-mapper">Tedge Azure mapper</a></h4>
<p>The log messages of the Azure mapper component that sends the measurement data from the thin-edge device to the Azure
cloud can be accessed as below.</p>
<p><code>journalctl -u tedge-mapper-az.service</code></p>
<blockquote>
<p>Note: Run <code>tedge_mapper --debug az</code> to log more debug messages</p>
</blockquote>
<h3 id="device-monitoring-logs"><a class="header" href="#device-monitoring-logs">Device monitoring logs</a></h3>
<p>The thin-edge device monitoring component logs can be found as below</p>
<h4 id="collectd-mapper-logs"><a class="header" href="#collectd-mapper-logs">Collectd mapper logs</a></h4>
<p>The log messages of the collectd mapper that sends the monitoring data to the cloud can be accessed as below</p>
<p><code>journalctl -u tedge-mapper-collectd.service</code></p>
<blockquote>
<p>Note: Run <code>tedge_mapper --debug collectd</code> to log more debug messages</p>
</blockquote>
<h3 id="software-management-logs"><a class="header" href="#software-management-logs">Software Management logs</a></h3>
<p>This section describes how to access the software management component logs</p>
<h4 id="software-update-operation-log"><a class="header" href="#software-update-operation-log">Software update operation log</a></h4>
<p>For every new software operation (list/update), a new log file will be created at <code>/var/log/tedge/agent</code>.
For each <code>plugin command</code> like prepare, update-list (install, remove), finalize, and list,
the log file captures <code>exit status, stdout, and stderr</code> messages.</p>
<h4 id="tedge-agent-logs"><a class="header" href="#tedge-agent-logs">Tedge Agent logs</a></h4>
<p>The agent service logs can be accessed as below</p>
<p><code>journalctl -u tedge-agent.service</code></p>
<p>For example: tedge-agent logs plugin calls finalize and list.</p>
<p>tedge-agent : TTY=unknown ; PWD=/tmp ; USER=root ; COMMAND=/etc/tedge/sm-plugins/apt finalize</p>
<p>tedge-agent : TTY=unknown ; PWD=/tmp ; USER=root ; COMMAND=/etc/tedge/sm-plugins/apt list</p>
<blockquote>
<p>Note: Run <code>tedge_agent --debug</code> to log more debug messages</p>
</blockquote>
<h4 id="tedge-cumulocity-sm-mapper-logs"><a class="header" href="#tedge-cumulocity-sm-mapper-logs">Tedge cumulocity sm mapper logs</a></h4>
<p>The software management mapper service logs can be accessed as below</p>
<p><code>journalctl -u tedge-mapper-sm-c8y.service</code></p>
<p>For example: tedge_mapper[6696]: 2021-09-29T03:38:53.853+00:00 ERROR tedge_mapper::mapper: MQTT connection error: I/O: Connection refused</p>
<blockquote>
<p>Note: Run <code>tedge_mapper --debug sm-c8y</code> to log more debug messages</p>
</blockquote>
<h2 id="thirdparty-component-logs"><a class="header" href="#thirdparty-component-logs">Thirdparty component logs</a></h2>
<p>Thin-edge uses the third-party components <code>Mosquitto</code> as the mqtt broker and <code>Collectd</code> for monitoring purpose.
The logs that are created by these components can be accessed on a thin-edge device as below.</p>
<h3 id="mosquitto-logs"><a class="header" href="#mosquitto-logs">Mosquitto logs</a></h3>
<p>Thin-edge uses <code>Mosquitto</code> as the <code>mqtt broker</code> for local communication as well as to communicate with the cloud.
The <code>Mosquitto</code> logs can be found in <code>/var/log/mosquitto/mosquitto.log</code>.
<code>Mosquitto</code> captures error, warning, notice, information, subscribe, and unsubscribe messages.</p>
<blockquote>
<p>Note: Set <code>log_type debug</code> or <code>log_type all</code> on /etc/mosquitto/mosquitto.conf, to capture more debug information.</p>
</blockquote>
<h3 id="collectd-logs"><a class="header" href="#collectd-logs">Collectd logs</a></h3>
<p><code>Collectd</code> is used for monitoring the resource status of a thin-edge device.
Collectd logs all the messages at <code>/var/log/syslog</code>.
So, the collectd specific logs can be accessed using the <code>journalctl</code> as below</p>
<p><code>journalctl -u collectd.service</code></p>
<h2 id="accessing-logs-remotely"><a class="header" href="#accessing-logs-remotely">Accessing logs remotely</a></h2>
<p>You can access logs from Cumulocity's &quot;Logs&quot; tab in Device Management. Do to this, go to the device you want to the logs for
and click on the &quot;Logs&quot; button on the left-hand side. Next, click on the &quot;Request log file&quot; button located in the top right corner. 
This will bring a dropdown into view where you can select the date and time range, the type of log required as well as filter 
for any particular words in the logs (such as ERROR) and select the total number of lines to upload.</p>
<p><img src="images/log_request_dropdown.png" alt="Log request dropdown" /></p>
<p>Logs are uploaded in the &quot;Events&quot; tab, where you can download them. </p>
<p><img src="images/log_request_events_tab.png" alt="Log request events tab" /></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../howto-guides/013_connect_external_device.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../howto-guides/015_installation_without_deb_support.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../howto-guides/013_connect_external_device.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../howto-guides/015_installation_without_deb_support.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
